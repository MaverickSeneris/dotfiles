#!/usr/bin/env bash

src="$1"
dest="$2"

if [ -z "$src" ] || [ -z "$dest" ]; then
  echo "Usage: cpp <source> <destination>"
  exit 1
fi

candy=(C c o O 0 O o c)

cp -r "$src" "$dest" &
pid=$!

echo -n "Copying "
i=0

while kill -0 "$pid" 2>/dev/null; do
  printf "\rCopying  %s" "${candy[$i]}"
  i=$(( (i+1) % ${#candy[@]} ))
  sleep 0.1
done

wait "$pid"
echo -e "\râœ… Done copying '$src' to '$dest'!"
